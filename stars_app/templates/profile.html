{% extends 'base.html' %}

{% block content %}

  <div class='introducing'>
    <form id='profile' action="{% url 'profile_create'%}" method="post">
      {% csrf_token %}
      <div class='box-form-profile'>

        <div class='boxt-first box-content'>
            <p class='close-form'>Close X</p>
            <p>Your can select your Avatar and <br>and give a short story on your profile</p>
            <p class='click-here'>Select or Change your icon</p>
        </div>
        <div class='box-middle'>
          <div class='message-box'>
            <div class="flex-container f-j-content">
                <div class="image-option">
                    <input class="radio" type="radio" name="avatar" value="https://i.imgur.com/OZUN5stt.png" id="1" checked="checked">
                    <label for="1"><img src="https://i.imgur.com/OZUN5stt.png"></label>
                </div>
                <div class="image-option">
                    <input class="radio" type="radio" name="avatar" value="https://i.imgur.com/bvrB60st.png" id="2">
                    <label for="2"><img src="https://i.imgur.com/bvrB60st.png"></label>
                </div>
                <div class="image-option">
                    <input class="radio" type="radio" name="avatar" value="https://i.imgur.com/OKNkYdht.png" id="3">
                    <label for="3"><img src="https://i.imgur.com/OKNkYdht.png"></label>
                </div>
                <div class="image-option">
                    <input class="radio" type="radio" name="avatar" value="https://i.imgur.com/rY6gOb4s.png" id="4">
                    <label for="4"><img src="https://i.imgur.com/rY6gOb4s.png"></label>
                </div>
                <div class="image-option">
                    <input class="radio" type="radio" name="avatar" value="https://i.imgur.com/GVNJAmKt.png" id="5">
                    <label for="5"><img src="https://i.imgur.com/GVNJAmKt.png"></label>
                </div>
                <div class="image-option">
                    <input class="radio" type="radio" name="avatar" value="https://i.imgur.com/rY6gOb4t.png" id="6">
                    <label for="6"><img src="https://i.imgur.com/rY6gOb4t.png"></label>
                </div>
                <div class="image-option">
                    <input class="radio" type="radio" name="avatar" value="https://i.imgur.com/GVNJAmKt.png" id="7">
                    <label for="7"><img src="https://i.imgur.com/GVNJAmKt.png"></label>
                </div>
            </div>
          </div>
        </div>
        <div class='box-last'>
          <p>Tell us about your story or how you feel today</p>
          <textarea class='col' name="userstory" rows="4" required></textarea>
          <input class='add' type="submit" value="Save your profile">
        </div>
      </div>
    </form>
  </div>

<main>
    <h3>Your Story</h3>
    <section class='user-post-section'>
        <div class='user-section'>
            <p class='create-user-profile'>Update Profile</p>
            <img class="image-profile" src="{{ profile.avatar }}">
            <p class='info'>{{ user.first_name }} {{ user.last_name }}</p>
            <p class='info'>{{ user.email }}</p>
            <div class='profile-detail-section'>
                <p><span class='span-gray'>Your story : </span></p><br>
                <p>{{ profile.userstory }}</p>
            </div>
        </div>

        {% for post in posts%}
        <div class='post-author-poem'>
          <div class='post-img-user mybtn' style="background-image:url({{ post.photo.url }})";">
              <p class='poem-detail'>{{ post.body }}</p>
          </div>
          <div class="modal">
              <div class="modal-content" style="background-image:url({{ post.photo.url }})";"></div>  
                <div class='read-me-poem'>
                    <div class="photo-title">{{ post.photo.title }}</div>
                    <p class='poem-detail-read'>{{ post.body }}</p>
                </div>
          </div>
          <p class='span-title'>{{ post.title }}</p>
            <a class='update' href="{% url 'post_edit' pk=post.pk %}">Update</a>
            <a class='delete' href="{% url 'post_delete' pk=post.pk%}">Delete</a>
          </div>
        {% endfor %}
    </section>
</main>

<script defer>

  // # controller # //
    $('main').on('click', '.mybtn', function (event) {
      event.target.nextElementSibling.style.display = 'block'
    })
  
    $('main').on('click', '.modal', function (event) {
      $('.modal').css('display', 'none')
    })

    $('.create-user-profile').on('click', function () {
      $('.introducing').css('display', 'block')
    })
    $('.click-here').on('click', function () {
      $('.box-middle').toggle()
    })

    $('.add').on('click', function () {
      $('.introducing').css('display', 'none')
      $('.box-middle').css('display', 'none')
    })

    $('.close-form').on('click', function () {
      $('.introducing').css('display', 'none')
      $('.box-middle').css('display', 'none')
    })

</script>
{% endblock %}
